"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"default",{enumerable:!0,get:function(){return Info}});var _discord=require("discord.js"),_main=require("../../../main"),_database=require("../../functions/database");function asyncGeneratorStep(e,t,n,a,r,o,i){try{var c=e[o](i),s=c.value}catch(e){n(e);return}c.done?t(s):Promise.resolve(s).then(a,r)}function Info(e,t){return _Info.apply(this,arguments)}function _Info(){var e;return e=function(e,t){var n,a,r,o,i,c,s,l;return function(e,t){var n,a,r,o,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(o){return function(c){return function(o){if(n)throw TypeError("Generator is already executing.");for(;i;)try{if(n=1,a&&(r=2&o[0]?a.return:o[0]?a.throw||((r=a.return)&&r.call(a),0):a.next)&&!(r=r.call(a,o[1])).done)return r;switch(a=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,a=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(r=(r=i.trys).length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){i=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){i.label=o[1];break}if(6===o[0]&&i.label<r[1]){i.label=r[1],r=o;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(o);break}r[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],a=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,c])}}}(this,function(u){switch(u.label){case 0:return[4,t.deferReply()];case 1:var d;return n=u.sent(),a=t.options,r=t.user,(null!=(d=_discord.CommandInteractionOptionResolver)&&"undefined"!=typeof Symbol&&d[Symbol.hasInstance]?!!d[Symbol.hasInstance](a):a instanceof d)&&(o=a.getUser("user",!1))&&(r=o),n.edit({content:_main.bt.__({phrase:"Searching for the user in the database",locale:t.locale})}),[4,(0,_database.getUser)(r.id,e.client.database)];case 2:if(!(i=u.sent()).horde_token)return[2,n.edit({content:_main.bt.__({phrase:"User not registered, you must register with %s",locale:t.locale},"</".concat(t.commandName," login:").concat(t.commandId,">"))})];n.edit({content:_main.bt.__({phrase:"Searching for the user in the API",locale:t.locale})}),c=e.client.decryptString(i.horde_token),s=e.client.aiHorde,u.label=3;case 3:return u.trys.push([3,5,,6]),[4,s.findUser({token:c})];case 4:return l=u.sent(),n.edit({content:"",embeds:[new _discord.EmbedBuilder().setTitle("Info de ".concat(l.username)).setDescription([Capitalize(_main.bt.__({phrase:"Usage",locale:t.locale})),"- ".concat(Capitalize(_main.bt.__("Image generated")),": ").concat(l.records.fulfillment.image," (`").concat(l.records.contribution.megapixelsteps," M\xe9gaPixels`)"),"- ".concat(Capitalize(_main.bt.__("Image requested")),": ").concat(l.records.request.image," (`").concat(l.records.usage.megapixelsteps," M\xe9gaPixels`)"),"- ".concat(Capitalize(_main.bt.__("Text generated")),": ").concat(l.records.fulfillment.text," (`").concat(l.records.contribution.tokens," tokens`)"),"- ".concat(Capitalize(_main.bt.__("Text requested")),": ").concat(l.records.request.text," (`").concat(l.records.usage.tokens," tokens`)"),"- ".concat(Capitalize(_main.bt.__("Image interogated generated")),": ").concat(l.records.fulfillment.interrogation),"- ".concat(Capitalize(_main.bt.__("Image interogated requested")),": ").concat(l.records.request.interrogation),Capitalize("Kudos"),"- ".concat(Capitalize(_main.bt.__("Total")),": ").concat(l.kudos),"- ".concat(Capitalize(_main.bt.__("Earned")),": ").concat(l.kudos_details.accumulated),"- ".concat(Capitalize(_main.bt.__("Admin")),": ").concat(l.kudos_details.admin),"- ".concat(Capitalize(_main.bt.__("Given")),": ").concat(l.kudos_details.gifted),"- ".concat(Capitalize(_main.bt.__("Received")),": ").concat(l.kudos_details.received),"- ".concat(Capitalize(_main.bt.__("Recurring")),": ").concat(l.kudos_details.recurring),Capitalize(_main.bt.__("Workers")),"- ".concat(Capitalize(_main.bt.__("Invited")),": ").concat(l.worker_invited),"- ".concat(Capitalize(_main.bt.__("Contributed")),": ").concat(l.worker_count)].join("\n"))]}),[3,6];case 5:return u.sent(),[2,n.edit({content:_main.bt.__({phrase:"Token invalid you must login again",locale:t.locale})})];case 6:return[2]}})},(_Info=function(){var t=this,n=arguments;return new Promise(function(a,r){var o=e.apply(t,n);function i(e){asyncGeneratorStep(o,a,r,i,c,"next",e)}function c(e){asyncGeneratorStep(o,a,r,i,c,"throw",e)}i(void 0)})}).apply(this,arguments)}function Capitalize(e){return"**".concat(e.charAt(0).toUpperCase()+e.slice(1),"**")}